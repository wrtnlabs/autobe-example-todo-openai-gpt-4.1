{"files":[{"filename":"schema-01-actors.prisma","namespace":"Actors","models":[{"name":"todo_list_users","description":"Registered application users. Represents individuals with private accounts for the Todo List service. Primary business entity for all authentication, authorization, and account lifecycle operations. Uniquely identified by email for login. Related entities include password reset tokens and active authentication sessions. On deletion, related todo items and session data must be automatically purged for privacy compliance.","material":false,"stance":"primary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[],"plainFields":[{"name":"email","type":"string","description":"User's email address for authentication and communication. Must be unique across all users, case-insensitive. Used for login and account recovery.","nullable":false},{"name":"password_hash","type":"string","description":"Securely salted hash of the user's password. Never stores the plain password. Used only for credential verification on login.","nullable":false},{"name":"is_email_verified","type":"boolean","description":"Flag indicating whether the user has successfully completed email ownership verification. Used to enable/disable access prior to verification.","nullable":false},{"name":"created_at","type":"datetime","description":"Timestamp for when the user account was created.","nullable":false},{"name":"updated_at","type":"datetime","description":"Timestamp for the latest user account update (profile/email/password change).","nullable":false},{"name":"deleted_at","type":"datetime","description":"Timestamp for soft deletion (account scheduled for deletion or pending GDPR removal). Null if active.","nullable":true}],"uniqueIndexes":[{"fieldNames":["email"],"unique":true}],"plainIndexes":[{"fieldNames":["created_at"]},{"fieldNames":["deleted_at"]}],"ginIndexes":[]},{"name":"todo_list_password_reset_tokens","description":"Single-use tokens enabling secure password reset for a user account. Tokens are time-limited and bound to the requesting user. Not independently manageable; always created in response to a password reset request and deleted after use or expiry. Supports audit/compliance workflows for account recovery.","material":false,"stance":"subsidiary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[{"name":"todo_list_user_id","type":"uuid","description":"Belonged user's {@link todo_list_users.id}. Associates this reset token with a user account for verification and recovery purposes.","relation":{"name":"user","targetModel":"todo_list_users"},"unique":false,"nullable":false}],"plainFields":[{"name":"token","type":"string","description":"Randomly generated, cryptographically secure token string. Used to verify password reset intent. Single-use only.","nullable":false},{"name":"expires_at","type":"datetime","description":"Token expiration timestamp. After this point, the token is invalidated by the system.","nullable":false},{"name":"used_at","type":"datetime","description":"Timestamp when this password reset token was actually used by the user. Null if not yet used.","nullable":true},{"name":"created_at","type":"datetime","description":"Timestamp when this reset token record was created.","nullable":false}],"uniqueIndexes":[{"fieldNames":["token"],"unique":true}],"plainIndexes":[{"fieldNames":["todo_list_user_id"]},{"fieldNames":["expires_at"]},{"fieldNames":["used_at"]}],"ginIndexes":[]},{"name":"todo_list_auth_sessions","description":"Records of authenticated sessions for each user. Enables session token revocation, tracking of active logins for security, automatic expiry, and support for global logout on password or email change. Each session is tied to a user and uniquely identified by session_token. Not directly managed by users.","material":false,"stance":"subsidiary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[{"name":"todo_list_user_id","type":"uuid","description":"Belonged user's {@link todo_list_users.id}. Associates session with a single user for permission enforcement and session history/auditing.","relation":{"name":"user","targetModel":"todo_list_users"},"unique":false,"nullable":false}],"plainFields":[{"name":"session_token","type":"string","description":"Opaque authentication token for this session (e.g., JWT or securely random string). Used for session validation on each API request.","nullable":false},{"name":"user_agent","type":"string","description":"Information about client browser, device, and OS for security logging and session management.","nullable":true},{"name":"ip_address","type":"string","description":"Most recent client IP address associated with the session. Used for security auditing and suspicious activity detection. Optional due to privacy policy constraints.","nullable":true},{"name":"expires_at","type":"datetime","description":"Session expiration timestamp; after this date the session is no longer valid.","nullable":false},{"name":"created_at","type":"datetime","description":"Timestamp for when the session was established.","nullable":false},{"name":"revoked_at","type":"datetime","description":"Timestamp when the session was explicitly revoked/logged out. Null if active.","nullable":true}],"uniqueIndexes":[{"fieldNames":["session_token"],"unique":true}],"plainIndexes":[{"fieldNames":["todo_list_user_id","expires_at"]}],"ginIndexes":[]}]},{"filename":"schema-02-todos.prisma","namespace":"Todos","models":[{"name":"todo_list_todos","description":"Active todo items belonging to a single user. Each todo can be created, viewed, updated, completed, or deleted only by its owner. Business rules require strong ownership enforcement, title uniqueness (incomplete todos only), field validation, full CRUD operations, and audit support through append-only deletion log. References the user in {@link todo_list_users.id}.","material":false,"stance":"primary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[{"name":"todo_list_user_id","type":"uuid","description":"Belonged user's {@link todo_list_users.id} who owns this todo item.","relation":{"name":"user","targetModel":"todo_list_users"},"unique":false,"nullable":false}],"plainFields":[{"name":"title","type":"string","description":"Title of the todo item. Business constraint: required, 1â€“255 chars, unique among incomplete todos for the owner.","nullable":false},{"name":"description","type":"string","description":"Optional user-provided description or details for the todo. Max 1000 characters, may be empty.","nullable":true},{"name":"due_date","type":"datetime","description":"Optional due date for the todo. Must be in the future when provided, null if unset.","nullable":true},{"name":"is_completed","type":"boolean","description":"Whether this todo item has been marked as completed by the owner. Defaults to false on creation. May be toggled true/false by user.","nullable":false},{"name":"completed_at","type":"datetime","description":"Timestamp when this todo was marked as completed. Null until completed.","nullable":true},{"name":"created_at","type":"datetime","description":"Timestamp when the todo was created. Required for all todos.","nullable":false},{"name":"updated_at","type":"datetime","description":"Timestamp of last update to any field of the todo. Updated on every edit.","nullable":false}],"uniqueIndexes":[{"fieldNames":["todo_list_user_id","title"],"unique":true}],"plainIndexes":[{"fieldNames":["todo_list_user_id","created_at"]},{"fieldNames":["todo_list_user_id","due_date"]},{"fieldNames":["todo_list_user_id","is_completed"]}],"ginIndexes":[{"fieldName":"title"},{"fieldName":"description"}]},{"name":"todo_list_deleted_todo_logs","description":"Historical log of deleted todo items. Functions as an append-only, immutable audit log for todos deleted by users. Supports business requirement allowing users to view deleted todos for up to 30 days after removal. References both the original todo's ID and the owning user. Retains all business fields for forensic and self-service recovery/audit purposes.","material":false,"stance":"snapshot","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[{"name":"todo_list_user_id","type":"uuid","description":"User's {@link todo_list_users.id} who originally owned the deleted todo.","relation":{"name":"user","targetModel":"todo_list_users"},"unique":false,"nullable":false}],"plainFields":[{"name":"original_todo_id","type":"uuid","description":"ID of the deleted todo as it was in {@link todo_list_todos.id}. Used for traceability and ensuring unique deletion records.","nullable":false},{"name":"title","type":"string","description":"Title of the deleted todo at the time of deletion. Preserved for user-facing audit and recovery history.","nullable":false},{"name":"description","type":"string","description":"Description (if any) for the deleted todo at the time of deletion. Preserved for audit.","nullable":true},{"name":"due_date","type":"datetime","description":"Due date for the todo at deletion, or null if unset.","nullable":true},{"name":"is_completed","type":"boolean","description":"Completion status as it was at deletion time. For audit and possible recovery logic.","nullable":false},{"name":"completed_at","type":"datetime","description":"When the todo was completed, as of deletion. Null if never completed.","nullable":true},{"name":"created_at","type":"datetime","description":"Original creation timestamp of the todo, as persisted in {@link todo_list_todos.created_at}.","nullable":false},{"name":"updated_at","type":"datetime","description":"Last modification timestamp of the todo before deletion, as persisted in {@link todo_list_todos.updated_at}.","nullable":false},{"name":"deleted_at","type":"datetime","description":"Timestamp when the deletion occurred; the audit log creation time for snapshot purposes. Required for retention window enforcement.","nullable":false}],"uniqueIndexes":[{"fieldNames":["original_todo_id"],"unique":true}],"plainIndexes":[{"fieldNames":["todo_list_user_id","deleted_at"]}],"ginIndexes":[{"fieldName":"title"},{"fieldName":"description"}]}]}]}